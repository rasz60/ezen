<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" 
 integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" 
 crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
<title>Insert title here</title>
</head>

<body>

<h3>현재 위치와 지도 출력</h3>
<hr />

<div id="msg">이곳에 위치 정보 출력</div>
<iframe frameborder="0" scrolling="no" marginheight="0" width="425" height="350" marginwidth="0" id="map">지도 표시</iframe>
<a id="bigmaplink" target="_blank">새 창에 큰 지도 보기</a>

<script>
if ( navigator.geolocation ) {
	navigator.geolocation.getCurrentPosition(success);
} else {
	alert('지원하지 않음');
}

function success(position) {
	let lat = position.coords.latitude;
	let lon = position.coords.longitude;
	let acc = position.coords.accuracy;
	
	lat = lat.toPrecision(6);
	lon = lon.toPrecision(6);	
	
	map.src = "http://www.openstreetmap.org/export/embed.html?bbox="
			+ (parseFloat(lon)-0.01) + "%2C" + (parseFloat(lat)-0.01) + "%2C"
			+ (parseFloat(lon)+0.01) + "%2C" + (parseFloat(lat)+0.01) + "%2C";
			
	let maplink = document.getElementById('bigmaplink');
	
	let zoom = 15;
	
	maplink.href = "http://www.openstreetmap.org/#map=" + zoom + "/" + lat + "/" + lon;
}
</script>

</body>
</html>